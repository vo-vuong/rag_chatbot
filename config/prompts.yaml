version: "1.0"
description: "Prompt templates for RAG Chatbot"

prompts:
  # ============================================================
  # SYSTEM PROMPTS - Instructions for LLM behavior
  # ============================================================

  - name: "system_rag_assistant"
    category: "system"
    description: "RAG-focused assistant with strict context adherence"
    language: "multi"
    template: |
      You are an AI assistant that answers questions based ONLY on provided context.

      Rules:
      - Only use information from the provided context
      - If context doesn't contain the answer, say "I don't have enough information"
      - Never fabricate information
      - Always cite which part of context you used
      - Respond in the same language as the user's question
    variables: []
    metadata:
      version: "1.0"
      strict: true

  - name: "system_helpful_assistant"
    category: "system"
    description: "Default helpful AI assistant with RAG capabilities"
    language: "multi"
    template: |
      You are a helpful AI assistant powered by RAG (Retrieval Augmented Generation).

      When answering questions:
      1. Base your answers primarily on the provided context from the documents
      2. If the context doesn't contain enough information, clearly state this
      3. Be concise and accurate
      4. Respond in the same language as the user's question
      5. If you reference specific information, indicate it comes from the documents

      Always maintain a helpful and professional tone.
    variables: []
    metadata:
      version: "1.0"
      default: true
      author: "system"

  # ============================================================
  # RAG PROMPTS - For context-based question answering
  # ============================================================

  - name: "rag_qa_with_history"
    category: "rag"
    description: "RAG with conversation history for context-aware answers"
    language: "multi"
    template: |
      Previous conversation:
      {chat_history}

      Relevant context from documents:
      {context}

      Current question: {query}

      Answer the current question using the retrieved context. Reference the 
      conversation history when relevant to provide continuity and context-aware responses.
    variables: ["context", "query", "chat_history"]
    metadata:
      version: "1.0"

  - name: "rag_qa_without_history"
    category: "rag"
    description: "Default RAG question answering with context"
    language: "multi"
    template: |
      Based on the following context from the documents:

      {context}

      Question: {query}

      Please answer the question using the provided context. If the context doesn't 
      contain enough information, state what is available and what is missing.
    variables: ["context", "query"]
    metadata:
      version: "1.0"
      default: true

  # ============================================================
  # IMAGE RAG PROMPTS - For image-based question answering
  # ============================================================

  - name: "rag_image_context"
    category: "rag"
    description: "Simple template for formatting image context"
    language: "multi"
    template: |
      Relevant Image Description:
      {image_caption}
    variables: ["image_caption"]
    metadata:
      version: "1.0"

  - name: "rag_qa_with_images"
    category: "rag"
    description: "RAG with text and image context"
    language: "multi"
    template: |
      Previous conversation:
      {chat_history}

      Text context from documents:
      {text_context}

      {image_context}

      Question: {query}

      Based on the text and image description above, provide the appropriate answer.
    variables: ["text_context", "image_context", "query", "chat_history"]
    metadata:
      version: "1.0"

  - name: "rag_qa_with_images_no_history"
    category: "rag"
    description: "RAG with text and image context, no history"
    language: "multi"
    template: |
      Text context from documents:
      {text_context}

      {image_context}

      Question: {query}

      Based on the text and image description above, provide the appropriate answer.
    variables: ["text_context", "image_context", "query"]
    metadata:
      version: "1.0"

  # ============================================================
  # ROUTING PROMPTS - For query classification
  # ============================================================

  - name: "router_system_prompt"
    category: "routing"
    description: "System prompt for LLM-based query classification"
    language: "en"
    template: |
      You are a query classifier for a RAG system with separate text and image collections.

      Classify the user's query to determine which collection to search.

      ROUTES:
      - text_only: Factual questions, explanations, definitions, procedures, concepts, how-to guides
      - image_only: Requests for visual content, diagrams, charts, figures, photos, screenshots, layouts

      DECISION RULES:
      1. "show me", "display", "picture", "image", "diagram", "chart", "figure", "screenshot" -> image_only
      2. "what is", "explain", "describe", "how does", "why", "define" -> text_only
      3. References to visual elements -> image_only
      4. Questions about processes, concepts, facts -> text_only

      Choose exactly ONE route.
    variables: []
    metadata:
      version: "1.0"
